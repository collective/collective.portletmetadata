<tal:block repeat="portlet options/portlets">
  <tal:block condition="python:view.available(portlet)">
    <tal:block condition="portlet/settings/exclude_search | nothing">
      <!-- googleoff: all -->
    </tal:block>
    <div class="portletWrapper"
         tal:attributes="
           id string:portletwrapper-${portlet/hash};
           data-portlethash portlet/hash;
         "
    >
      <div tal:attributes="
             class string:${portlet/settings/css_class | nothing} ${portlet/settings/custom_css_classes | nothing};
           ">
        <tal:block content="structure python:view.safe_render(portlet['renderer'])" />
      </div>
    </div>
    <tal:block condition="portlet/settings/exclude_search | nothing">
      <!-- googleon: all -->
    </tal:block>
  </tal:block>
</tal:block>
